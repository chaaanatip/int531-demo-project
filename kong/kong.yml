_format_version: '3.0'

services:
  - name: backend
    url: http://backend:8080
    routes:
      - name: backend-api
        paths:
          - /api
        strip_path: true

  - name: frontend
    url: http://frontend:80
    routes:
      - name: frontend-root
        paths:
          - /
        strip_path: false

plugins:
  - name: cors
    config:
      origins:
        - '*'
      methods:
        - GET
        - POST
        - PUT
        - PATCH
        - DELETE
        - OPTIONS
      headers:
        - Accept
        - Accept-Version
        - Content-Length
        - Content-MD5
        - Content-Type
        - Date
        - Authorization
      exposed_headers:
        - Authorization
      credentials: false
      max_age: 3600
